<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math Solver Pro | Full NCERT 2020 Portal</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&family=Noto+Serif+Devanagari:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --accent: #6366f1;
            --accent-glow: rgba(99, 102, 241, 0.4);
            --bg-dark: #020617;
            --glass: rgba(255, 255, 255, 0.03);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text-bright: #f8fafc;
            --text-dim: #94a3b8;
            --success: #10b981;
            --gold: #fbbf24;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Plus Jakarta Sans', sans-serif; }
        body { background-color: var(--bg-dark); min-height: 100vh; color: var(--text-bright); overflow-x: hidden; }

        /* MOTIVATIONAL MATH BACKGROUND */
        .bg-gradient {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: 
                linear-gradient(rgba(2, 6, 23, 0.8), rgba(2, 6, 23, 0.9)),
                url('https://images.unsplash.com/photo-1635070041078-e363dbe005cb?auto=format&fit=crop&q=80&w=2000'); /* Math Formula Background */
            background-size: cover;
            background-position: center;
            z-index: -2;
        }

        .math-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background-image: radial-gradient(var(--accent-glow) 1px, transparent 1px);
            background-size: 50px 50px;
            opacity: 0.2;
            z-index: -1;
        }

        .page-view { display: none; width: 100%; max-width: 1200px; margin: 0 auto; padding: 40px 20px; z-index: 10; animation: fadeIn 0.6s ease-out; }
        .page-view.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* HERO SECTION REDESIGN */
        .hero-section { 
            background: rgba(255, 255, 255, 0.05); 
            backdrop-filter: blur(15px); 
            border: 1px solid var(--glass-border); 
            border-radius: 40px; 
            padding: 80px 60px; 
            display: grid; 
            grid-template-columns: 1.2fr 0.8fr; 
            gap: 40px; 
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        .hero-section::before {
            content: '∑';
            position: absolute;
            top: -20px; right: 20px;
            font-size: 15rem;
            color: rgba(255,255,255,0.03);
            font-weight: 800;
        }

        /* SHLOK CARD ENHANCEMENT */
        .shlok-card { 
            background: linear-gradient(145deg, rgba(251, 191, 36, 0.1), rgba(2, 6, 23, 0.8)); 
            border-radius: 30px; 
            padding: 50px; 
            text-align: center; 
            border: 1px solid rgba(251, 191, 36, 0.4); 
            margin-top: 40px; 
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }
        .shlok-hindi { font-family: 'Noto Serif Devanagari', serif; font-size: 2.2rem; color: var(--gold); margin-bottom: 20px; line-height: 1.4; text-shadow: 0 0 15px rgba(251, 191, 36, 0.4); }
        
        .motivation-tagline {
            font-size: 1.2rem;
            color: var(--text-dim);
            margin-bottom: 20px;
            letter-spacing: 2px;
            text-transform: uppercase;
            font-weight: 600;
        }

        .quote-box {
            border-left: 4px solid var(--accent);
            padding-left: 20px;
            margin: 30px 0;
            font-style: italic;
            color: #cbd5e1;
            font-size: 1.1rem;
        }

        /* REMAINING COMPONENTS STAY SAME */
        .glass-card { background: var(--glass); backdrop-filter: blur(30px); border: 1px solid var(--glass-border); border-radius: 40px; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5); overflow: hidden; }
        .auth-container { max-width: 450px; margin: 100px auto; padding: 50px; }
        .input-box { width: 100%; background: rgba(15, 23, 42, 0.8); border: 1px solid var(--glass-border); border-radius: 12px; color: white; padding: 14px; margin-bottom: 20px; outline: none; }
        .selection-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 20px; }
        select, textarea { width: 100%; background: rgba(15, 23, 42, 0.8); border: 1px solid var(--glass-border); border-radius: 12px; color: white; padding: 14px; outline: none; }
        .main-btn { width: 100%; padding: 18px; background: linear-gradient(135deg, #6366f1, #a855f7); color: white; border: none; border-radius: 15px; font-weight: 700; cursor: pointer; transition: 0.3s; display: flex; align-items: center; justify-content: center; gap: 10px; margin-top: 10px; }
        .main-btn:disabled { opacity: 0.5; cursor: wait; }
        .main-btn:hover:not(:disabled) { transform: translateY(-3px); box-shadow: 0 15px 30px var(--accent-glow); }
        .question-preview { background: rgba(99,102,241,0.1); padding: 20px; border-radius: 15px; margin-top: 15px; border: 1px solid var(--accent); }
        .solution-box { margin-top: 20px; padding: 25px; background: rgba(16, 185, 129, 0.1); border: 1px solid var(--success); border-radius: 20px; }
        .hidden { display: none !important; }
        .badge { background: rgba(99, 102, 241, 0.2); color: #a5b4fc; padding: 5px 12px; border-radius: 100px; font-size: 10px; font-weight: 700; text-transform: uppercase; cursor: pointer; }
        .admin-item { background: rgba(255,255,255,0.05); padding: 20px; border-radius: 15px; margin-bottom: 15px; border: 1px solid var(--glass-border); }
        .history-section { margin-top: 30px; border-top: 1px solid var(--glass-border); padding-top: 20px; }
        .history-item { padding: 15px; background: rgba(255,255,255,0.03); margin-bottom: 10px; border-radius: 12px; cursor: pointer; transition: 0.2s; border: 1px solid transparent; }
        .history-item:hover { border-color: var(--accent); background: rgba(99,102,241,0.1); }
        .sol-img { max-width: 100%; border-radius: 15px; margin-top: 15px; border: 1px solid var(--success); display: block; }
    </style>
</head>
<body>

    <div class="bg-gradient"></div>
    <div class="math-overlay"></div>

    <div id="landingView" class="page-view active">
        <div class="hero-section">
            <div class="content">
                <div class="motivation-tagline">Achieve Infinite Potential</div>
                <h1 style="font-size: 4rem; line-height: 1; margin-bottom: 20px; font-weight: 800;">Master the <br><span style="color: var(--accent);">Language of Nature.</span></h1>
                
                <div class="quote-box">
                    "Mathematics is not about numbers, equations, computations, or algorithms: it is about understanding."
                    <br><small style="color: var(--accent); font-weight: 600;">— William Paul Thurston</small>
                </div>

                <p style="color: var(--text-dim); margin-bottom: 40px; font-size: 1.1rem; max-width: 500px;">Access the complete NCERT Class 10 database. Ask complex questions, get verified solutions, and track your progress through the world of logic.</p>
                
                <div style="display: flex; gap: 20px;">
                    <button onclick="switchView('authView')" class="main-btn" style="max-width: 250px;">Student Login <i class="fa-solid fa-graduation-cap"></i></button>
                    <button onclick="showAdmin()" class="main-btn" style="max-width: 200px; background: rgba(255,255,255,0.05); border: 1px solid var(--glass-border);">Teacher Portal <i class="fa-solid fa-chalkboard-user"></i></button>
                </div>
            </div>
            <div style="text-align: right;">
                <img src="https://cdni.iconscout.com/illustration/premium/thumb/mathematics-illustration-download-in-svg-png-gif-file-formats--formula-geometry-study-education-pack-illustrations-5384439.png" style="width: 110%; filter: drop-shadow(0 20px 30px var(--accent-glow));">
            </div>
        </div>

        <div class="shlok-card">
            <div class="shlok-hindi">न हि ज्ञानेन सदृशं पवित्रमिह विद्यते ।<br>तत्स्वयं योगसंसिद्ध: कालेनात्मनि विन्दति ॥</div>
            <div style="font-size: 1.3rem; color: #f1f5f9; margin-top: 20px; font-weight: 300;">"Is sansaar mein gyaan ke samaan pavitra kuch bhi nahi hai..."</div>
            <div style="font-style: italic; color: var(--text-dim); margin-top: 15px; font-size: 1.1rem; max-width: 800px; margin-left: auto; margin-right: auto; line-height: 1.6;">
                "In this world, there is nothing so purifying as knowledge. One who has become accomplished in Yoga finds that knowledge within oneself in due course of time." 
                <br><strong style="color: var(--gold);">— Bhagavad Gita (Adhyaya 4, Shloka 38)</strong>
            </div>
        </div>
        
        <div style="text-align: center; margin-top: 60px; color: var(--text-dim);">
            <i class="fa-solid fa-square-root-variable" style="font-size: 2rem; margin: 0 20px; opacity: 0.5;"></i>
            <i class="fa-solid fa-infinity" style="font-size: 2rem; margin: 0 20px; opacity: 0.5;"></i>
            <i class="fa-solid fa-superscript" style="font-size: 2rem; margin: 0 20px; opacity: 0.5;"></i>
        </div>
    </div>

    <div id="authView" class="page-view">
        <div class="glass-card auth-container">
            <span class="badge" onclick="showAdmin()">Teacher Portal</span>
            <h2 style="text-align: center; margin-bottom: 30px; margin-top: 10px;">Student Login</h2>
            <form onsubmit="handleAuth(event)">
                <label style="font-size: 12px; color: var(--text-dim);">USERNAME</label>
                <input type="text" id="userName" class="input-box" required>
                <label style="font-size: 12px; color: var(--text-dim);">PASSWORD</label>
                <input type="password" id="userPass" class="input-box" required>
                <button type="submit" class="main-btn">Access Database</button>
            </form>
        </div>
    </div>

    <div id="dashboardView" class="page-view">
        <div class="glass-card" style="padding: 40px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                <h2 id="welcomeMsg">Welcome</h2>
                <button onclick="location.reload()" class="badge" style="background:rgba(239, 68, 68, 0.2); color: #f87171;">Logout</button>
            </div>

            <form onsubmit="handleStudentSubmit(event)">
                <div class="selection-grid">
                    <div><label style="font-size: 10px; color: var(--text-dim);">CHAPTER</label>
                    <select id="chapterSelect" onchange="loadExercises()" required></select></div>
                    <div><label style="font-size: 10px; color: var(--text-dim);">EXERCISE</label>
                    <select id="exSelect" onchange="loadQuestions()" required><option>Select Chapter</option></select></div>
                </div>
                <label style="font-size: 10px; color: var(--text-dim);">QUESTION</label>
                <select id="qSelect" onchange="showPreview()" required><option>Select Exercise</option></select>
                
                <div id="previewBox" class="question-preview hidden">
                    <strong id="qLabelDisplay" style="color: var(--accent); display: block; margin-bottom: 5px;"></strong>
                    <div id="previewContent" style="font-size: 14px; line-height: 1.5;"></div>
                </div>
                <button type="submit" id="askBtn" class="main-btn">Ask Teacher for Solution</button>
            </form>

            <div id="statusArea" style="margin-top: 20px; color: var(--accent); font-weight: 600; text-align: center;"></div>

            <div id="solutionDisplay" class="solution-box hidden">
                <h4 style="color: var(--success); margin-bottom: 10px;"><i class="fa-solid fa-circle-check"></i> Teacher's Response:</h4>
                <p id="solutionText" style="white-space: pre-wrap; line-height: 1.6;"></p>
                <div id="solutionImageContainer"></div>
            </div>

            <div id="userHistory" class="history-section hidden">
                <h3 style="margin-bottom: 15px; font-size: 1.1rem; color: var(--accent);">Your Solved Questions</h3>
                <div id="historyList"></div>
            </div>
        </div>
    </div>

    <div id="adminView" class="page-view">
        <div class="glass-card" style="padding: 40px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                <h2>Teacher Dashboard</h2>
                <button class="badge" style="background: #6366f1; color: white;" onclick="switchView('dashboardView')">Exit Admin</button>
            </div>
            <div id="pendingQuestions"></div>
        </div>
    </div>

    <script>
        // FULL DATABASE (Chapter 1-15)
        const ncertDatabase = {
            "Chapter 1: Real Numbers": {
                "Exercise 1.1": ["1. Use Euclid’s division algorithm to find HCF: (i) 135 & 225 (ii) 196 & 38220 (iii) 867 & 255","2. Show any positive odd integer is form 6q+1, 6q+3, 6q+5","3. Army contingent 616 members, band 32. Max columns?","4. Square of integer is 3m or 3m+1","5. Cube of integer is 9m, 9m+1 or 9m+8"],
                "Exercise 1.2": ["1. Prime factors: 140, 156, 3825, 5005, 7429","2. Find LCM/HCF and verify Product rule","3. LCM/HCF by prime factorisation: (i) 12, 15, 21...","4. HCF(306, 657)=9, find LCM","5. Can 6^n end with 0?","6. Explain composite numbers","7. Sonia/Ravi meeting time"],
                "Exercise 1.3": ["1. Prove √5 is irrational", "2. Prove 3 + 2√5 is irrational", "3. Prove 1/√2, 7√5, 6+√2 are irrational"],
                "Exercise 1.4": ["1. Terminating vs Repeating decimals", "2. Decimal expansions of Q1", "3. Decide rationality and prime factors of q"]
            },
            "Chapter 2: Polynomials": {
                "Exercise 2.1": ["1. Find number of zeroes from graphs"],
                "Exercise 2.2": ["1. Find zeroes and verify relationship","2. Find quadratic poly given Sum/Product"],
                "Exercise 2.3": ["1. Divide p(x) by g(x)","2. Check if first poly is factor of second","3. Find other zeroes of 3x^4+6x^3-2x^2-10x-5","4. Find g(x) given p(x), q(x), r(x)","5. Examples of p(x), g(x), q(x), r(x)"]
            },
            "Chapter 3: Linear Equations": {
                "Exercise 3.1": ["1. Aftab's age problem","2. Bat and ball cost","3. Apple and grape cost"],
                "Exercise 3.2": ["1. Graphic solutions for quiz/pencil-pen","2. Compare a1/a2, b1/b2, c1/c2","3. Consistent/Inconsistent check","4. Graphic check for consistency","5. Garden dimensions problem","6. Write equation for Intersecting/Parallel/Coincident","7. Triangle vertices with x-axis graph"],
                "Exercise 3.3": ["1. Substitution method solve","2. Solve and find m for y=mx+3","3. Formulate and solve situational problems"],
                "Exercise 3.4": ["1. Elimination and Substitution methods","2. Problems on fractions, age, numbers, etc."],
                "Exercise 3.5": ["1. Cross-multiplication method","2. Find a and b for infinite solutions","3. Solve by cross-multiplication","4. Part of monthly hostel charges, etc."],
                "Exercise 3.6": ["1. Equations reducible to linear form","2. Ritu rowing, work problems, train speed"]
            },
            "Chapter 4: Quadratic Equations": {
                "Exercise 4.1": ["1. Check if quadratic","2. Formulate equations for plot/integers/age/train"],
                "Exercise 4.2": ["1. Factorisation roots","2. Solve problems from Example 1","3. Two numbers sum 27, prod 182","4. Consecutive integers sum of squares 365","5. Right triangle altitude/base","6. Cottage industry pottery"],
                "Exercise 4.3": ["1. Completing square method","2. Quadratic formula roots","3. Roots of x - 1/x = 3...","4. Rehman's age problem","5. Shefali marks problem","6. Rectangular field diagonal","7. Difference of squares of two numbers","8. Train speed problem","9. Water taps problem","10. Express train time","11. Sum of area of two squares"],
                "Exercise 4.4": ["1. Nature of roots","2. Find k for equal roots","3. Mango grove design","4. Age situation check","5. Park design check"]
            },
            "Chapter 5: Arithmetic Progressions": {
                "Exercise 5.1": ["1. Situations checking AP","2. Write terms given a & d","3. Find a & d","4. Which are APs?"],
                "Exercise 5.2": ["1. Use a_n = a+(n-1)d table","2. Choose correct option","3. Find missing terms in boxes","4. Which term is 78?","5. Find number of terms","6. Check if -150 is a term","7. Find 31st term","8. AP consists of 50 terms...","9. 3rd and 9th terms are 4 and -8","10. 17th term exceeds 10th by 7","11. Term 132 more than 54th term","12. Same common difference between two APs","13. 3-digit numbers divisible by 7","14. Multiples of 4 between 10 and 250","15. Value of n for which n-th terms are equal","16. Determine AP with 3rd term 16...","17. 20th term from last","18. Sum of 4th and 8th terms...","19. Subba Rao salary","20. Ramkali saving problem"],
                "Exercise 5.3": ["1. Sum of AP","2. Find sums given in expressions","3. Find a, d, n, S_n, etc.","4. How many terms to give sum 636?","5. First term 5, last 45...","6. First and last terms 17 and 350...","7. Sum of first 22 terms...","8. Sum of first 51 terms...","9. Sum of first 7 terms is 49...","10. Show a_n forms an AP...","11. Sum of first n terms is 4n - n^2...","12. Sum of first 40 positive integers divisible by 6","13. Sum of first 15 multiples of 8","14. Sum of odd numbers between 0 and 50","15. Construction job penalty","16. Seven cash prizes","17. School tree planting","18. Spiral made of semicircles","19. 200 logs stacking","20. Potato race distance"],
                "Exercise 5.4 (Optional)": ["1. First negative term","2. Sum of 3rd and 7th terms...","3. Ladder rungs","4. Row of houses","5. Terrace with 15 steps"]
            },
            "Chapter 6: Triangles": { 
                "Exercise 6.1": ["1. Fill in the blanks (Similar/Congruent)","2. Give two examples of similar figures","3. State whether quadrilaterals are similar"],
                "Exercise 6.2": ["1. Find EC and AD (BPT applications)","2. E and F are points on sides...","3. Prove AM/AB = AN/AD","4. Prove BF/FE = BE/EC","5. Prove EF || QR","6. Prove BC || QR","7. Use Theorem 6.1 to prove...","8. Use Theorem 6.2 to prove...","9. Trapezium ABCD with AB || DC...","10. Diagonals of quadrilateral intersect at O..."],
                "Exercise 6.3": ["1. Identify similar triangles and criteria","2. Find ∠DOC, ∠DCO and ∠OAB","3. Diagonals AC and BD of trapezium...","4. Prove ∆PQS ~ ∆TQR","5. S and T are points on PR and QR...","6. ∆ABE ≅ ∆ACD, prove ∆ADE ~ ∆ABC","7. Altitudes AD and CE intersect at P...","8. E is a point on side AD produced of ABCD...","9. ABC and AMP are two right triangles...","10. CD and GH are bisectors...","11. E is a point on side CB produced...","12. Sides AB, BC and median AD...","13. D is a point on side BC...","14. Sides AB, AC and median AD...","15. Vertical pole 6m casts shadow 4m...","16. AD and PM are medians..."],
                "Exercise 6.4": ["1. Find area of ∆DEF","2. Diagonals of trapezium intersect at O...","3. ABC and DBC are on same base BC...","4. Areas of two similar triangles are equal...","5. D, E, F are midpoints...","6. Ratio of areas of two similar triangles...","7. Area of equilateral triangle on side of square...","8. ABC and BDE are equilateral triangles...","9. Sides of similar triangles ratio 4:9..."],
                "Exercise 6.5": ["1. Which are right triangles?","2. PQR is right triangle at P...","3. ABD is right triangle at A...","4. ABC is isosceles at C...","5. ABC is isosceles with AC = BC...","6. Equilateral triangle of side 2a...","7. Sum of squares of sides of rhombus...","8. O is a point in interior of ∆ABC...","9. Ladder 10m reaches window 8m...","10. Guy wire attached to pole 18m...","11. Two airplanes leaving airport...","12. Two poles 6m and 11m...","13. D and E are points on sides CA and CB...","14. Perpendicular from A on BC...","15. Equilateral triangle ABC, BD = 1/3 BC...","16. Equilateral triangle, 3x side sq = 4x altitude sq","17. Tick the correct answer..."],
                "Exercise 6.6 (Optional)": ["1. Bisector of angle...","2. Perpendicular from D on hypotenuse...","3. ABC with ∠ABC > 90...","4. ABC with ∠ABC < 90...","5. AD is median of ABC...","6. Sum of squares of diagonals of parallelogram...","7. Two chords AB and CD intersect at P...","8. Two chords AB and CD produced intersect at P...","9. D is a point on side BC such that BD/CD = AB/AC...","10. Nazima is fly-fishing..."]
            },
            "Chapter 7: Coordinate Geometry": { 
                "Exercise 7.1": ["1. Distance formula","2. Distance between (0,0) and (36, 15)","3. Check if points are collinear","4. Check if isosceles triangle","5. Champa and Chameli in classroom","6. Type of quadrilateral formed","7. Point on x-axis equidistant...","8. Value of y for distance 10...","9. Q(0,1) equidistant from P(5,-3) and R(x,6)","10. Relation between x and y..."],
                "Exercise 7.2": ["1. Find coordinates of point dividing...","2. Points of trisection...","3. Sports day flags at 1/4th and 1/5th...","4. Ratio in which segment is divided...","5. Ratio in which x-axis divides...","6. Vertices of parallelogram, find x and y","7. Coordinates of point A where AB is diameter...","8. Find coordinates of P such that AP = 3/7 AB","9. Coordinates of points dividing into 4 parts","10. Area of rhombus given vertices"],
                "Exercise 7.3": ["1. Area of triangle","2. Find k for collinear points","3. Area of triangle formed by midpoints","4. Area of quadrilateral","5. Median divides triangle into two equal parts"],
                "Exercise 7.4 (Optional)": ["1. Determine ratio in which 2x + y - 4 = 0 divides...","2. Relation between x and y if (x,y), (1,2) and (7,0) are collinear","3. Center of circle passing through (6,-6), (3,-7), (3,3)","4. Opposite vertices of square are (-1,2) and (3,2)...","5. Class X students in rectangular plot...","6. Vertices of ∆ABC are A(4,6), B(1,5) and C(7,2)...","7. Median AD, find coordinates of G...","8. ABCD is rectangle formed by..."]
            },
            "Chapter 8: Trigonometry": { 
                "Exercise 8.1": ["1. Find sin A, cos A, sin C, cos C","2. Find tan P - cot R","3. Sin A = 3/4, find cos A and tan A","4. 15 cot A = 8, find sin A and sec A","5. Sec θ = 13/12, find all other ratios","6. ∠A and ∠B are acute, cos A = cos B...","7. Cot θ = 7/8, evaluate (1+sin θ)(1-sin θ)...","8. 3 cot A = 4, check if (1-tan^2)/(1+tan^2) = ...","9. ∆ABC right at B, tan A = 1/√3...","10. ∆PQR right at Q, PR + QR = 25...","11. State True/False..."],
                "Exercise 8.2": ["1. Evaluate trigonometric values","2. Choose correct option and justify","3. Tan (A+B) = √3 and Tan (A-B) = 1/√3...","4. State True/False..."],
                "Exercise 8.3": ["1. Evaluate complementary ratios","2. Show that tan 48 tan 23...","3. Tan 2A = cot (A - 18)...","4. Tan A = cot B, prove A + B = 90","5. Sec 4A = cosec (A - 20)...","6. ABC are interior angles, show sin (B+C)/2...","7. Express sin 67 + cos 75 in terms of 0-45"],
                "Exercise 8.4": ["1. Express sin A, sec A, tan A in terms of cot A","2. Write all other ratios in terms of sec A","3. Evaluate squares of sin and cos","4. Choose correct option (Identities)","5. Prove the following identities (i) to (x)"]
            },
            "Chapter 9: Heights & Distances": { 
                "Exercise 9.1": ["1. Circus artist climbing 20m rope...","2. Tree breaks in storm...","3. Contractor installing two slides...","4. Angle of elevation of tower from 30m away...","5. Kite flying at 60m height...","6. 1.5m tall boy walking towards 30m building...","7. From point on ground, elevation of tower on 20m building...","8. Statue 1.6m tall stands on pedestal...","9. Elevation of building from foot of tower...","10. Two poles of equal heights on either side of 80m road...","11. TV tower on bank of canal...","12. From top of 7m building, elevation of cable tower...","13. As observed from 75m high lighthouse...","14. 1.2m tall girl spots balloon...","15. Straight highway leads to foot of tower...","16. Elevation of top of tower from two points at 4m and 9m..."]
            },
            "Chapter 10: Circles": { 
                "Exercise 10.1": ["1. How many tangents can a circle have?","2. Fill in the blanks (Tangents and points)","3. Tangent PQ at point P to circle radius 5m...","4. Draw circle and two lines parallel to given line..."],
                "Exercise 10.2": ["1. Distance of Q from center is 25cm, tangent is 24cm...","2. TP and TQ are two tangents, ∠POQ = 110...","3. Tangents PA and PB inclined at 80...","4. Prove tangents at ends of diameter are parallel","5. Prove perpendicular at point of contact passes through center","6. Length of tangent from point A at distance 5cm is 4cm...","7. Two concentric circles radii 5cm and 3cm...","8. Quadrilateral ABCD drawn to circumscribe a circle...","9. XY and X'Y' are two parallel tangents...","10. Prove angle between two tangents is supplementary...","11. Prove circumscribing parallelogram is a rhombus","12. Triangle ABC drawn to circumscribe a circle radius 4cm...","13. Prove opposite sides of circumscribing quadrilateral..."]
            },
            "Chapter 11: Constructions": { 
                "Exercise 11.1": ["1. Divide line segment of 7.6cm in 5:8","2. Construct triangle similar to given triangle ratio 2/3","3. Triangle similar with ratio 7/5","4. Isosceles triangle construction","5. Triangle with BC=6cm, AB=5cm, ∠ABC=60...","6. Triangle with BC=7cm, ∠B=45, ∠A=105...","7. Right triangle with sides 4cm and 3cm..."],
                "Exercise 11.2": ["1. Draw circle radius 6cm, construct tangents...","2. Tangent to circle radius 4cm from concentric circle 6cm","3. Draw circle radius 3cm, take points P and Q...","4. Pair of tangents inclined at 60...","5. Line segment AB 8cm, circles at A and B...","6. Right triangle ABC with AB=6, BC=8, ∠B=90...","7. Draw circle using bangle, construct tangents..."]
            },
            "Chapter 12: Areas of Circles": { 
                "Exercise 12.1": ["1. Radii of two circles 19cm and 9cm...","2. Radii of two circles 8cm and 6cm...","3. Archery target regions...","4. Wheels of car diameter 80cm...","5. Tick the correct answer (Perimeter=Area)"],
                "Exercise 12.2": ["1. Area of sector radius 6cm, angle 60","2. Area of quadrant circumference 22cm","3. Area swept by minute hand in 5 mins","4. Area of minor/major segments chord 10cm","5. Area of sector/segment radius 21cm, angle 60","6. Area of minor/major segments radius 15cm, angle 60","7. Area of segment radius 12cm, angle 120","8. Horse tied to square grass field...","9. Brooch made with silver wire...","10. Umbrella with 8 ribs...","11. Car with two wipers...","12. Lighthouse warns ships...","13. Round table cover with 6 designs...","14. Tick the correct answer..."],
                "Exercise 12.3": ["1. Find area of shaded region (Semicircle/Triangle)","2. Shaded region (Concentric circles)","3. Shaded region (Square/Semicircles)","4. Shaded region (Equilateral triangle/Circle)","5. Shaded region (Square quadrants/Circle)","6. Circular table cover design...","7. Shaded region (4 circles/Square)","8. Racing track area and distance","9. Shaded region (Circles in circle)","10. Area of shaded region equilateral triangle...","11. 9 circular handkerchief designs...","12. OACB is quadrant, find shaded area...","13. Square OABC in quadrant OPBQ...","14. AB and CD are arcs of decimal circles...","15. Quadrant ABC and semicircle on BC...","16. Area of design between two quadrants..."]
            },
            "Chapter 13: Surface Areas": { 
                "Exercise 13.1": ["1. 2 cubes volume 64 joined end to end...","2. Vessel in form of hollow hemisphere...","3. Toy in form of cone on hemisphere...","4. Cubical block side 7 topped by hemisphere...","5. Hemispherical depression cut from cube...","6. Medicine capsule...","7. Tent cylinder topped by cone...","8. Solid cylinder height 2.4 diameter 1.4...","9. Wooden article scooping out hemispheres..."],
                "Exercise 13.2": ["1. Solid in shape of cone on hemisphere...","2. Rachel engineering student model...","3. Gulab jamun syrup...","4. Pen stand made of wood...","5. Vessel in form of inverted cone...","6. Solid iron pole cylinder...","7. Solid consisting of cone and hemisphere...","8. Spherical glass vessel..."],
                "Exercise 13.3": ["1. Metallic sphere radius 4.2 melted into cylinder...","2. Metallic spheres 6, 8, 10 melted into one...","3. 20m deep well 7m diameter...","4. Well 3m diameter 14m deep...","5. Container cylinder full of ice cream...","6. Silver coins diameter 1.75...","7. Cylindrical bucket height 32...","8. Water in canal 6m wide 1.5m deep...","9. Farmer connects pipe from canal to tank..."],
                "Exercise 13.4": ["1. Drinking glass frustum of cone...","2. Slant height of frustum 4cm...","3. Fez (Turkish cap) frustum...","4. Metal container height 16...","5. Metallic cone height 20 cut at middle..."],
                "Exercise 13.5 (Optional)": ["1. Copper wire diameter 3mm...","2. Right triangle sides 3 and 4...","3. Cistern 150 x 120 x 110...","4. In one fortnight, rainfall 10cm...","5. Frustum-shaped tin for oil...","6. Frustum of cone slant height...","7. Model of temple..."]
            },
            "Chapter 14: Statistics": { 
                "Exercise 14.1": ["1. Find mean number of plants per house","2. Daily wages of 50 workers","3. Find missing frequency f for mean 18","4. Heart beats per minute of 30 women","5. Number of mangoes in crates","6. Daily expenditure on food","7. Concentration of SO2 in air","8. Number of days students were absent","9. Literacy rate of 35 cities"],
                "Exercise 14.2": ["1. Mode and Mean of ages in hospital","2. Mode of lifetimes of 225 electrical components","3. Modal monthly expenditure of 200 families","4. Mode and Mean of state-wise teacher-student ratio","5. Mode of runs scored by batsmen","6. Mode of number of cars passing road"],
                "Exercise 14.3": ["1. Median, Mean and Mode of monthly consumption","2. Find x and y if median is 28.5","3. Life insurance policies median age","4. Median length of 40 leaves","5. Median lifetime of 400 neon lamps","6. Median number of letters in surnames","7. Median weight of 30 students"],
                "Exercise 14.4": ["1. Cumulative frequency distribution (Less than type)","2. Less than type ogive for weights","3. More than type distribution and ogive"]
            },
            "Chapter 15: Probability": { 
                "Exercise 15.1": ["1. Fill in the blanks (Basic theory)","2. Which have equally likely outcomes?","3. Why is tossing coin fair?","4. Which cannot be probability?","5. P(E) = 0.05, find P(not E)","6. Bag contains lemon candies only...","7. Probability of two students not having same birthday","8. Bag contains 3 red and 5 black balls...","9. Box contains 5 red, 8 white, 4 green marbles...","10. Piggy bank with 50p, ₹1, ₹2, ₹5 coins...","11. Gopi buys fish from shop...","12. Game of chance with spinning arrow...","13. Die is thrown once (Prime, range, odd)","14. Deck of 52 cards (King, Face, Heart, etc.)","15. Five cards (Ten, Jack, Queen, King, Ace)","16. 12 defective pens mixed with 132 good ones...","17. 20 bulbs, 4 defective...","18. Box contains 90 discs 1 to 90...","19. Child has die with letters A, B, C, D, E, A...","20. Die dropped on rectangular region with circle...","21. Lot of 144 ball pens, 20 defective...","22. Table for sum of two dice...","23. Game of tossing three coins...","24. Die thrown twice (5 appearing)","25. Which arguments are correct?"],
                "Exercise 15.2 (Optional)": ["1. Two customers Shyam and Ekta...","2. Die with faces 1, 2, 2, 3, 3, 6...","3. Bag contains 5 red and some blue balls...","4. Box contains 12 balls, x black...","5. Jar contains 24 marbles, some green..."]
            }
        };

        const DB_KEY = 'MathPortal_Final_Sync';
        let currentUser = null, currentPass = null;

        function getDB() { return JSON.parse(localStorage.getItem(DB_KEY)) || { requests: [] }; }
        function saveDB(data) { localStorage.setItem(DB_KEY, JSON.stringify(data)); }

        function switchView(id) {
            document.querySelectorAll('.page-view').forEach(v => v.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            if(id === 'dashboardView') { populateChapters(); renderUserHistory(); }
            if(id === 'adminView') renderAdminTasks();
        }

        function handleAuth(e) {
            e.preventDefault();
            currentUser = document.getElementById('userName').value.trim();
            currentPass = document.getElementById('userPass').value;
            document.getElementById('welcomeMsg').innerText = "Student: " + currentUser;
            switchView('dashboardView');
        }

        function populateChapters() {
            const chapS = document.getElementById('chapterSelect');
            chapS.innerHTML = '<option value="" disabled selected>Select Chapter</option>';
            Object.keys(ncertDatabase).forEach(chap => chapS.add(new Option(chap, chap)));
        }

        function loadExercises() {
            const chap = document.getElementById('chapterSelect').value;
            const exS = document.getElementById('exSelect');
            exS.innerHTML = '<option value="" disabled selected>Select Exercise</option>';
            if(ncertDatabase[chap]) Object.keys(ncertDatabase[chap]).forEach(ex => exS.add(new Option(ex, ex)));
        }

        function loadQuestions() {
            const chap = document.getElementById('chapterSelect').value;
            const ex = document.getElementById('exSelect').value;
            const qS = document.getElementById('qSelect');
            qS.innerHTML = '<option value="" disabled selected>Select Question Number</option>';
            if(ncertDatabase[chap][ex]) ncertDatabase[chap][ex].forEach((q, i) => qS.add(new Option(`Question ${i+1}`, i)));
        }

        function showPreview() {
            const chap = document.getElementById('chapterSelect').value;
            const ex = document.getElementById('exSelect').value;
            const qIdx = document.getElementById('qSelect').value;
            document.getElementById('previewBox').classList.remove('hidden');
            document.getElementById('qLabelDisplay').innerText = `${ex} - Q${parseInt(qIdx)+1}`;
            document.getElementById('previewContent').innerText = ncertDatabase[chap][ex][qIdx];
        }

        function handleStudentSubmit(e) {
            e.preventDefault();
            const chap = document.getElementById('chapterSelect').value;
            const ex = document.getElementById('exSelect').value;
            const qIdx = document.getElementById('qSelect').value;
            const qText = ncertDatabase[chap][ex][qIdx];
            const reqId = Date.now();
            let db = getDB();
            db.requests.push({
                id: reqId, user: currentUser, pass: currentPass,
                chapter: chap, exercise: ex, qNum: parseInt(qIdx) + 1,
                question: qText, solution: null, solImage: null
            });
            saveDB(db);
            document.getElementById('statusArea').innerText = "Request sent. Waiting for teacher...";
            startStatusCheck(reqId);
        }

        function renderAdminTasks() {
            const container = document.getElementById('pendingQuestions');
            const db = getDB();
            const pending = db.requests.filter(r => !r.solution && !r.solImage);
            container.innerHTML = pending.length === 0 ? "<p style='color:var(--text-dim)'>No pending requests.</p>" : "";
            pending.forEach(req => {
                const div = document.createElement('div');
                div.className = "admin-item";
                div.innerHTML = `
                    <div style="margin-bottom:10px;"><span class="badge">${req.user}</span> <strong>${req.chapter}</strong></div>
                    <p style="font-size:14px; color:#ccc; margin-bottom:15px;">${req.question}</p>
                    <textarea id="sol-${req.id}" placeholder="Write solution here..."></textarea>
                    <input type="file" id="img-${req.id}" style="margin:10px 0; font-size:12px;" accept="image/*">
                    <button id="btn-${req.id}" class="main-btn" onclick="publishSolution(${req.id})">Publish Solution</button>
                `;
                container.appendChild(div);
            });
        }

        function publishSolution(id) {
            const solText = document.getElementById(`sol-${id}`).value;
            const fileInput = document.getElementById(`img-${id}`);
            const btn = document.getElementById(`btn-${id}`);
            btn.disabled = true; btn.innerText = "Processing Image...";
            const saveProcess = (imgData = null) => {
                setTimeout(() => {
                    let latestDB = getDB();
                    const idx = latestDB.requests.findIndex(r => r.id === id);
                    if(idx !== -1) {
                        latestDB.requests[idx].solution = solText || "Solution provided.";
                        latestDB.requests[idx].solImage = imgData;
                        try { saveDB(latestDB); alert("Published Successfully!"); renderAdminTasks(); } 
                        catch (e) { alert("Storage Full!"); btn.disabled = false; btn.innerText = "Publish Solution"; }
                    }
                }, 100);
            };
            if (fileInput.files && fileInput.files[0]) {
                const reader = new FileReader();
                reader.onload = (e) => saveProcess(e.target.result);
                reader.readAsDataURL(fileInput.files[0]);
            } else saveProcess();
        }

        function renderUserHistory() {
            const db = getDB();
            const mySolved = db.requests.filter(r => r.user === currentUser && r.pass === currentPass && (r.solution || r.solImage));
            if(mySolved.length > 0) {
                document.getElementById('userHistory').classList.remove('hidden');
                const list = document.getElementById('historyList');
                list.innerHTML = "";
                mySolved.forEach(item => {
                    const d = document.createElement('div');
                    d.className = "history-item";
                    d.innerHTML = `<strong>${item.chapter} - Ex ${item.exercise}</strong><br>
                        <span style="font-size:12px; color:var(--text-dim);">Q${item.qNum}: ${item.question.substring(0, 40)}...</span>`;
                    d.onclick = () => showSolution(item.solution, item.solImage);
                    list.appendChild(d);
                });
            }
        }

        function startStatusCheck(id) {
            const timer = setInterval(() => {
                const db = getDB();
                const req = db.requests.find(r => r.id === id);
                if(req && (req.solution || req.solImage)) {
                    showSolution(req.solution, req.solImage);
                    clearInterval(timer);
                }
            }, 3000);
        }

        function showSolution(text, img) {
            document.getElementById('statusArea').innerText = "";
            document.getElementById('solutionDisplay').classList.remove('hidden');
            document.getElementById('solutionText').innerText = text;
            const box = document.getElementById('solutionImageContainer');
            box.innerHTML = img ? `<img src="${img}" class="sol-img">` : "";
            renderUserHistory();
            window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
        }

        function showAdmin() { if(prompt("Teacher Key:") === "1445") switchView('adminView'); }
    </script>
</body>
</html>